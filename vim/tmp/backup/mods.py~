#!/usr/bin/env python
from os import system


build_str = 'javac -cp libs/lwjgl.jar:minecraft.jar -d bin/{} sources/{}.java'
path_str = 'mkdir -p "bin/{}"'
zip_str = 'cd bin && zip -r ../minecraft.jar *'
clear_str = 'rm -rf bin && mkdir bin'
merge_zip = 'zipmerge {} {}'

print('Creating backup...')
system('cp minecraft.jar minecraft_bak_m.jar')

print('Unpacking...')
system('mkdir tmp')
system('unzip -d tmp vanilla.jar > /dev/null')
system('rm -rf tmp/META-INF')

print('Processing mods...')
data = open('mods_list').readlines()
for file_name in data:
    file_name = file_name.strip()
    if len(file_name) == 0 or file_name[0] == '#':
        continue

    system('unzip -o -d tmp "mods/{}" > /dev/null'.format(file_name))


print('Packing...')
system("cd tmp && zip -r ../minecraft.jar * > /dev/null")

print('Clearing...')
system("rm -rf tmp")

print('Done')
